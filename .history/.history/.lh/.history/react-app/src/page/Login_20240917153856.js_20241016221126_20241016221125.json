{
    "sourceFile": ".history/react-app/src/page/Login_20240917153856.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1729090226702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1729090226702,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useAuth } from '/A'; // ตรวจสอบเส้นทางการนำเข้าที่ถูกต้อง\r\n\r\nfunction Login() {\r\n    const { login } = useAuth();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n    \r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await axios.post('http://localhost:3000/login', {\r\n                email: email,\r\n                password: password\r\n            }, {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            login(res.data.token);\r\n            alert('Login Successful!');\r\n            navigate('/');\r\n        } catch (err) {\r\n            setError(err.response ? err.response.data.message : 'Login failed');\r\n            console.error(err.response ? err.response.data : err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-red-200\"> \r\n            <div className=\"p-8 bg-white mt-6 rounded-lg shadow-md\">\r\n                <form onSubmit={handleSubmit} className=\"p-3 w-96\">\r\n                    <h2 className=\"text-2xl font-bold mb-4 text-center\">Login</h2> \r\n\r\n                    <div className=\"mb-4\">\r\n                        <label className=\"block text-gray-700\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            className=\"w-full p-2 border border-gray-300 rounded mt-2\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"mb-4\">\r\n                        <label className=\"block text-gray-700\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className=\"w-full p-2 border border-gray-300 rounded mt-2\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"w-full bg-[#ff2800] text-white py-2 px-4 rounded hover:bg-[#cc0000] focus:outline-none focus:ring-2 focus:ring-[#ff2800]\"\r\n                    >\r\n                        Login\r\n                    </button>\r\n                </form>\r\n                <p>\r\n                    <Link to=\"/register\" className=\"mt-5 text-center block text-blue-800 hover:underline\">\r\n                        สมัครสมาชิก\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"
        }
    ]
}